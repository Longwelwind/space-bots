openapi: 3.0.0
info:
    title: Space bots
    version: 1.0.0
servers:
    - url: "{host}/v1/"
      description: Main server
      variables:
          host:
              default: https://space-bots.longwelwind.net

security:
    - bearerAuth: []

paths:
    /users/me:
        get:
            summary: Return information about yourself
            tags:
                - Users
            responses:
                "200":
                    description: Info about yourself
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    id:
                                        type: string
                                    name:
                                        type: string
                                    credits:
                                        type: integer
                                    registeredAt:
                                        type: string
                                        format: date-time
                                    registered:
                                        type: boolean
                                        description: Whether this user has already registered their username if they logged in via a third-party provider
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /users/register:
        post:
            summary: Register yourself
            tags:
                - Users
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                name:
                                    type: string
            responses:
                "200":
                    description: TODO
                    content:
                        application/json:
                            schema:
                                type: object
                "400":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["name_taken"]
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /systems/{systemId}:
        get:
            summary: Return info about a system
            tags:
                - Systems
            parameters:
                - $ref: "#/components/parameters/systemId"
            responses:
                "200":
                    description: Info about the system
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - id
                                    - name
                                    - x
                                    - "y"
                                    - neighboringSystems
                                properties:
                                    id:
                                        type: string
                                    name:
                                        type: string
                                    asteroid:
                                        type: object
                                        required:
                                            - miningResourceId
                                        properties:
                                            miningResourceId:
                                                type: string
                                    station:
                                        type: object
                                        required:
                                            - buyShips
                                            - directSell
                                            - cargo
                                        properties:
                                            buyShips:
                                                type: boolean
                                                description: Whether you can buy ships at this station
                                            directSell:
                                                type: boolean
                                                description: Whether you can sell resources directly at this station
                                            cargo:
                                                type: object
                                                description: The ressources stored inside this station
                                                additionalProperties:
                                                    type: integer
                                    x:
                                        type: number
                                    y:
                                        type: number
                                    neighboringSystems:
                                        type: array
                                        description: List of IDs of the systems
                                        items:
                                            type: object
                                            required:
                                                - systemId
                                            properties:
                                                systemId:
                                                    type: string
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "404":
                    description: System not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /fleets/{fleetId}/travel:
        post:
            summary: Order your fleet to travel to an adjacent system
            tags:
                - Fleets
            parameters:
                - $ref: "#/components/parameters/fleetId"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - destinationSystemId
                            properties:
                                destinationSystemId:
                                    type: string
            responses:
                "200":
                    description: TODO
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    arrivalTime:
                                        type: string
                                        format: date-time
                                    duration:
                                        type: number
                "400":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum:
                                            [
                                                "fleet_busy",
                                                "same_system",
                                                "system_not_reachable",
                                            ]
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "403":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_owner"]
                "404":
                    description: Fleet or system not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /fleets/{fleetId}/mine:
        post:
            summary: Order your fleet to start minining
            tags:
                - Fleets
            parameters:
                - $ref: "#/components/parameters/fleetId"
            responses:
                "200":
                    description: TODO
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    finishTime:
                                        type: string
                                        format: date-time
                                    duration:
                                        type: number
                "400":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["fleet_busy", "cant_mine"]
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "403":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_owner"]
                "404":
                    description: Fleet not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /fleets/{fleetId}/buy-ships:
        post:
            summary: Buy ship at a fair, market price
            tags:
                - Fleets
            parameters:
                - $ref: "#/components/parameters/fleetId"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - shipsToBuy
                            properties:
                                shipsToBuy:
                                    type: object
                                    additionalProperties:
                                        type: integer
                                        minimum: 1
            responses:
                "200":
                    description: Ships bought
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    creditsSpent:
                                        type: integer
                "400":
                    description: A JSON array of user names
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum:
                                            [
                                                "not_enough_credits",
                                                "no_station",
                                                "too_much_ships_in_fleet",
                                            ]
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "403":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_owner"]
                "404":
                    description: Fleet not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /fleets/my:
        get:
            summary: Return the list of your fleets
            tags:
                - Fleets
            responses:
                "200":
                    description: A JSON array of user names
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    allOf:
                                        - $ref: "#/components/schemas/Fleet"
                                        - $ref: "#/components/schemas/Cargo"
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /systems/{systemId}/fleets:
        get:
            summary: Return the fleets in the system
            parameters:
                - $ref: "#/components/parameters/systemId"
                - in: query
                  name: count
                  schema:
                      type: integer
                      minimum: 1
                      default: 20
                      maximum: 50
                  description: The number of items to return
                - in: query
                  name: pageNext
                  schema:
                      type: string
                  description: A cursor to fetch the next items
                - in: query
                  name: pagePrevious
                  schema:
                      type: string
                  description: A cursor to fetch the previous items
            tags:
                - Fleets
            responses:
                "200":
                    description: Items successfuly fetched
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    items:
                                        type: array
                                        items:
                                            allOf:
                                                - $ref: "#/components/schemas/Fleet"
                                    pagination:
                                        type: object
                                        required:
                                            - total
                                        properties:
                                            total:
                                                type: number
                                                minimum: 0
                                            pageNext:
                                                type: string
                                            pagePrevious:
                                                type: string

                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "404":
                    description: System not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /fleets/{fleetId}:
        get:
            summary: Return info about a fleet
            tags:
                - Fleets
            parameters:
                - $ref: "#/components/parameters/fleetId"
            responses:
                "200":
                    description: A JSON array of user names
                    content:
                        application/json:
                            schema:
                                allOf:
                                    - $ref: "#/components/schemas/Fleet"
                                    - $ref: "#/components/schemas/Cargo"
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "404":
                    description: Fleet not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /fleets/{fleetId}/direct-sell:
        post:
            summary: Sell the content of the cargo of a fleet at a flat price
            tags:
                - Fleets
            parameters:
                - $ref: "#/components/parameters/fleetId"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - resources
                            properties:
                                resources:
                                    type: object
                                    additionalProperties:
                                        type: integer
                                        minimum: 1
            responses:
                "200":
                    description: Resources were successfuly sold
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - creditsGained
                                properties:
                                    creditsGained:
                                        type: integer
                "400":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum:
                                            [
                                                "fleet_busy",
                                                "no_station",
                                                "not_enough_resources",
                                            ]
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "403":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_owner"]
                "404":
                    description: Fleet not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    # /fleets/{fleetId}/build-ships:
    #     post:
    #         summary: |
    #             Build ships using resources
    #         description: |
    #             Build ships using resources in the cargo of the fleet. The cost of building a
    #             ship can be found by calling `GET /ship-types`.
    #         tags:
    #             - Fleets
    #         parameters:
    #             - $ref: "#/components/parameters/fleetId"
    #         requestBody:
    #             required: true
    #             content:
    #                 application/json:
    #                     schema:
    #                         type: object
    #                         properties:
    #                             shipsToBuild:
    #                                 type: object
    #                                 additionalProperties:
    #                                     type: integer
    #                                     minimum: 1

    #                     examples:
    #                         example:
    #                             value:
    #                                 shipsToBuild:
    #                                     miner: 2
    #                                     fighter: 3
    #                             summary: Builds 2 miner ships and 3 figher ships
    #         responses:
    #             "200":
    #                 description: Ships successfuly built
    #                 content:
    #                     application/json:
    #                         schema:
    #                             type: object
    #                             properties:
    #                                 resourcesSpent:
    #                                     type: object
    #                                     additionalProperties:
    #                                         type: integer
    #                         examples:
    #                             example:
    #                                 value:
    #                                     resourcesSpent:
    #                                         aluminium: 4
    #                                         zinc: 2
    #                                 summary: Building those ships has cost 4 aluminium and 2 zinc
    #             "400":
    #                 description: Error
    #                 content:
    #                     application/json:
    #                         schema:
    #                             type: object
    #                             properties:
    #                                 error:
    #                                     type: string
    #                                     enum:
    #                                         [
    #                                             "fleet_busy",
    #                                             "not_enough_resources",
    #                                             "too_much_ships_in_fleet",
    #                                             "not_buildable_ship_type",
    #                                         ]
    #             "401":
    #                 $ref: "#/components/responses/401_unauthorized"
    #             "403":
    #                 description: Error
    #                 content:
    #                     application/json:
    #                         schema:
    #                             type: object
    #                             properties:
    #                                 error:
    #                                     type: string
    #                                     enum: ["not_owner"]
    #             "404":
    #                 description: Fleet not found
    #                 content:
    #                     application/json:
    #                         schema:
    #                             type: object
    #                             properties:
    #                                 error:
    #                                     type: string
    #                                     enum: ["not_found"]
    #             "429":
    #                 $ref: "#/components/responses/429_too_many_requests"
    /fleets/{fleetId}/transfer:
        post:
            summary: Transfer ships and cargo to an other fleet
            description: |
                This route can be used to create new fleet by calling it without specifying `targetFleetId`.

                ⚠️ Transfering all the ships out of a fleet will destroy it, losing any cargo this fleet had in the process
            tags:
                - Fleets
            parameters:
                - $ref: "#/components/parameters/fleetId"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                targetFleetId:
                                    type: string
                                resourcesFromFleetToTarget:
                                    type: object
                                    additionalProperties:
                                        type: integer
                                resourcesFromTargetToFleet:
                                    type: object
                                    additionalProperties:
                                        type: integer
                                shipsFromFleetToTarget:
                                    type: object
                                    additionalProperties:
                                        type: integer
                                shipsFromTargetToFleet:
                                    type: object
                                    additionalProperties:
                                        type: integer
            responses:
                "200":
                    description: A JSON array of user names
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    newFleetId:
                                        type: string
                "400":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum:
                                            [
                                                "fleet_busy",
                                                "new_fleet_must_have_ships",
                                                "cant_transfer_from_target_when_creating_fleet",
                                                "not_enough_resources",
                                                "not_enough_ships",
                                                "too_much_ships_in_fleet",
                                                "not_in_same_location",
                                            ]
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "403":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_owner"]
                "404":
                    description: Fleet not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /fleets/{fleetId}/transfer-to-station:
        post:
            summary: Transfer cargo to the station
            tags:
                - Fleets
            parameters:
                - $ref: "#/components/parameters/fleetId"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                resourcesFromFleetToStation:
                                    type: object
                                    additionalProperties:
                                        type: integer
                                resourcesFromStationToFleet:
                                    type: object
                                    additionalProperties:
                                        type: integer
            responses:
                "200":
                    description: A JSON array of user names
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    newFleetId:
                                        type: string
                "400":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum:
                                            [
                                                "fleet_busy",
                                                "not_enough_resources",
                                                "no_station",
                                            ]
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "403":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_owner"]
                "404":
                    description: Fleet not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /systems/{systemId}/market/resources/{resourceId}:
        get:
            summary: Return information about the market for this resource
            parameters:
                - $ref: "#/components/parameters/systemId"
                - $ref: "#/components/parameters/resourceId"
            tags:
                - Markets
            responses:
                "200":
                    description: Info about the market for this resources
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - sellOrders
                                    - buyOrders
                                    - lastTransactions
                                properties:
                                    sellOrders:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                quantity:
                                                    type: integer
                                                price:
                                                    type: integer
                                    buyOrders:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                quantity:
                                                    type: integer
                                                price:
                                                    type: integer
                                    lastTransactions:
                                        type: array
                                        items:
                                            type: object
                                            required:
                                                - quantity
                                                - price
                                                - time
                                            properties:
                                                quantity:
                                                    type: integer
                                                price:
                                                    type: integer
                                                time:
                                                    type: string
                                                    format: date-time

                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "404":
                    description: System or resource not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /systems/{systemId}/market/resources/{resourceId}/sell-orders:
        post:
            summary: Place an order to sell a quantity of ressources at a certain price
            description: |
                Place, or update, your sell order for this `ressource` at this `price` in this `system`:

                * If you have no sell order or if your current sell order is lower than `quantity`, then this call
                will update your sell order and remove the units of ressources from your station inventory not already placed in the sell order.
                If there are buy orders for a price equal or lower than `price`, then those
                orders will be partially or fully fulfilled.

                * If your current sell order is higher than `quantity`, then this call will update
                your sell order and add units of ressources in your station inventory.
            tags:
                - Markets
            parameters:
                - $ref: "#/components/parameters/systemId"
                - $ref: "#/components/parameters/resourceId"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - quantity
                                - price
                            properties:
                                quantity:
                                    type: integer
                                    minimum: 1
                                price:
                                    type: integer
                                    minimum: 1
            responses:
                "200":
                    description: The order was successfuly placed
                    content:
                        application/json:
                            schema:
                                type: object
                "400":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum:
                                            [
                                                "fleet_busy",
                                                "no_station",
                                                "not_enough_resources",
                                            ]
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "403":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_owner"]
                "404":
                    description: Fleet not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /systems/{systemId}/market/resources/{resourceId}/instant-sell:
        post:
            summary: Sell a quantity of resources at the current best price
            description: |
                Try to sell `quantity` of ressources in `system` at the price
                of the market.

                If there are not enough buyers to sell `quantity` ressources, then this
                call will sell as much ressources as possible.
            tags:
                - Markets
            parameters:
                - $ref: "#/components/parameters/systemId"
                - $ref: "#/components/parameters/resourceId"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - quantity
                            properties:
                                quantity:
                                    type: integer
                                    minimum: 1
            responses:
                "200":
                    description: Resources were successfuly sold
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - quantitySold
                                    - creditsGained
                                properties:
                                    quantitySold:
                                        type: integer
                                        description: The quantity of ressources that were sold by this call
                                    creditsGained:
                                        type: integer
                                        description: The amount of credits gained in the transaction
                "400":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum:
                                            [
                                                "fleet_busy",
                                                "no_station",
                                                "not_enough_resources",
                                            ]
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "403":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_owner"]
                "404":
                    description: Fleet not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /systems/{systemId}/market/resources/{resourceId}/buy-orders:
        post:
            summary: Place an order to buy a quantity of ressources at a certain price
            description: |
                Place, or update, your buy order for this `ressource` at this `price` in this `system`:

                * If you have no buy order or if your current buy order is lower than `quantity`, then this call
                will update your buy order and remove credits not already engaged in the buy order.
                If there are sell orders for a price equal or higher than `price`, then those
                orders will be partially or fully fulfilled.

                * If your current buy order is higher than `quantity`, then this call will update
                your sell order and reimburse you the credits that were engaged in this buy order.
            tags:
                - Markets
            parameters:
                - $ref: "#/components/parameters/systemId"
                - $ref: "#/components/parameters/resourceId"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - quantity
                                - price
                            properties:
                                quantity:
                                    type: integer
                                    minimum: 1
                                price:
                                    type: integer
                                    minimum: 1
            responses:
                "200":
                    description: The order was successfuly placed
                    content:
                        application/json:
                            schema:
                                type: object
                "400":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum:
                                            [
                                                "fleet_busy",
                                                "no_station",
                                                "not_enough_credits",
                                            ]
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "403":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_owner"]
                "404":
                    description: Fleet not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /systems/{systemId}/market/resources/{resourceId}/instant-buy:
        post:
            summary: Buy a quantity of resources at the current best price
            description: |
                Try to buy `quantity` of ressources in `system` at the price
                of the market.

                If there are not enough sellers to buy `quantity` ressources, then this
                call will buy as much ressources as possible.
            tags:
                - Markets
            parameters:
                - $ref: "#/components/parameters/systemId"
                - $ref: "#/components/parameters/resourceId"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            required:
                                - quantity
                            properties:
                                quantity:
                                    type: integer
                                    minimum: 1
            responses:
                "200":
                    description: Resources were successfuly bought
                    content:
                        application/json:
                            schema:
                                type: object
                                required:
                                    - creditsSpent
                                properties:
                                    quantityBought:
                                        type: integer
                                        description: The amount of resources that were bought
                                    creditsSpent:
                                        type: integer
                                        description: The credits that were spent in this transaction
                "400":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum:
                                            [
                                                "fleet_busy",
                                                "no_station",
                                                "not_enough_resources",
                                            ]
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "403":
                    description: Error
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_owner"]
                "404":
                    description: Fleet not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /systems/{systemId}/market/resources/{resourceId}/buy-orders/my:
        get:
            summary: Get your buy orders for this resource
            tags:
                - Markets
            parameters:
                - $ref: "#/components/parameters/systemId"
                - $ref: "#/components/parameters/resourceId"
            responses:
                "200":
                    description: Buy orders successfuly fetched
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    type: object
                                    required:
                                        - price
                                        - quantity
                                    properties:
                                        price:
                                            type: integer
                                        quantity:
                                            type: integer
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "404":
                    description: System or resource not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /systems/{systemId}/market/resources/{resourceId}/sell-orders/my:
        get:
            summary: Get your sell orders for this resource
            tags:
                - Markets
            parameters:
                - $ref: "#/components/parameters/systemId"
                - $ref: "#/components/parameters/resourceId"
            responses:
                "200":
                    description: Sell orders successfuly fetched
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    type: object
                                    required:
                                        - price
                                        - quantity
                                    properties:
                                        price:
                                            type: integer
                                        quantity:
                                            type: integer
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "404":
                    description: System or resource not found
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: string
                                        enum: ["not_found"]
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /ship-types:
        get:
            summary: Lists all the types of ships
            tags:
                - Ship Types
            responses:
                "200":
                    description: A JSON array of user names
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    type: object
                                    properties:
                                        id:
                                            type: string
                                        name:
                                            type: string
                                        price:
                                            type: integer
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
    /resources:
        get:
            summary: Lists all the resources
            tags:
                - Resources
            responses:
                "200":
                    description: A JSON array of user names
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    type: object
                                    properties:
                                        id:
                                            type: string
                                        name:
                                            type: string
                                        price:
                                            type: integer
                "401":
                    $ref: "#/components/responses/401_unauthorized"
                "429":
                    $ref: "#/components/responses/429_too_many_requests"
components:
    securitySchemes:
        bearerAuth:
            type: http
            scheme: bearer
    responses:
        "401_unauthorized":
            description: No credentials or invalid credentials
            content:
                application/json:
                    schema:
                        type: object
                        properties:
                            error:
                                type: string
                                enum: ["unauthorized"]
        "429_too_many_requests":
            description: Too many requests were sent
            content:
                application/json:
                    schema:
                        type: object
                        properties:
                            error:
                                type: string
                                enum: ["rate_limited"]
    parameters:
        fleetId:
            in: path
            name: fleetId
            schema:
                type: string
            required: true
            description: ID of the fleet
        systemId:
            in: path
            name: systemId
            schema:
                type: string
            required: true
            description: ID of the system
        resourceId:
            in: path
            name: resourceId
            schema:
                type: string
            required: true
            description: ID of the resource
    schemas:
        Fleet:
            type: object
            required:
                - id
                - owner
                - ships
            properties:
                id:
                    type: string
                    format: uuid
                    description: "ID of the fleet"
                owner:
                    oneOf:
                        - type: object
                          required: [type, userId]
                          properties:
                              type:
                                  type: string
                                  enum: ["user"]
                              userId:
                                  type: string
                locationSystemid:
                    type: string
                    nullable: true
                    description: |-
                        ID of the system where this fleet is located.
                        Is null when travelling to an other system
                currentAction:
                    oneOf:
                        - type: object
                          nullable: true
                        - type: object
                          required: [type]
                          properties:
                              type:
                                  type: string
                                  enum: ["mining"]
                              finishTime:
                                  type: string
                        - type: object
                          required: [type]
                          properties:
                              type:
                                  type: string
                                  enum: ["traveling"]
                              departueTime:
                                  type: string
                              arrivalTime:
                                  type: string
                              travelingFromSystemId:
                                  type: string
                              travelingToSystemId:
                                  type: string
                ships:
                    type: object
                    example: { "miner": 2 }
        Cargo:
            type: object
            properties:
                cargo:
                    type: object
                    example: { "aluminium": 20 }
